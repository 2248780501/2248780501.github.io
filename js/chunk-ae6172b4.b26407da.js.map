{"version":3,"sources":["webpack:///./node_modules/core-js/internals/get-substitution.js","webpack:///./src/views/member/pay/checkout.vue","webpack:///./src/views/member/pay/components/checkout-address.vue","webpack:///./src/views/member/pay/components/address-edit.vue","webpack:///./src/views/member/pay/components/address-edit.vue?a8ba","webpack:///./src/views/member/pay/components/checkout-address.vue?0179","webpack:///./src/views/member/pay/checkout.vue?7e4b","webpack:///./src/views/member/pay/components/checkout-address.vue?d252","webpack:///./node_modules/core-js/modules/es.string.replace.js","webpack:///./src/views/member/pay/checkout.vue?51fb","webpack:///./src/views/member/pay/components/address-edit.vue?1f6a","webpack:///./src/api/order.js"],"names":["toObject","floor","Math","replace","SUBSTITUTION_SYMBOLS","SUBSTITUTION_SYMBOLS_NO_NAMED","module","exports","matched","str","position","captures","namedCaptures","replacement","tailPos","length","m","symbols","undefined","call","match","ch","capture","charAt","slice","n","f","class","width","to","order","changeAddress","list","userAddresses","goods","item","key","skuId","id","src","picture","alt","name","attrsText","price","count","totalPrice","totalPayPrice","summary","goodsCount","postFee","submitOrderFn","type","showAddress","receiver","contact","fullLocation","address","openAddressEdit","href","openDialog","title","visible","visibleDialog","footer","style","confirmAddressFn","selectedAddress","successHandler","ref","formData","submit","placeholder","changeCity","postalCode","addressTags","setup","props","emit","open","value","provinceCode","cityCode","countyCode","isDefault","result","Message","text","test","then","data","render","__scopeId","components","AddressEdit","Array","default","emits","defaultAddress","find","addressEditCom","jsonStr","JSON","stringify","unshift","parse","CheckoutAddress","route","store","query","orderId","reqParams","map","addressId","deliveryTimeType","payType","payChannel","buyerMessage","router","dispatch","push","fixRegExpWellKnownSymbolLogic","anObject","toLength","toInteger","requireObjectCoercible","advanceStringIndex","getSubstitution","regExpExec","max","min","maybeToString","it","String","REPLACE","nativeReplace","maybeCallNative","reason","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","REPLACE_KEEPS_$0","UNSAFE_SUBSTITUTE","searchValue","replaceValue","O","this","replacer","regexp","indexOf","res","done","rx","S","functionalReplace","global","fullUnicode","unicode","lastIndex","results","matchStr","accumulatedResult","nextSourcePosition","i","index","j","groups","replacerArgs","concat","apply","createOrder","request","repurchaseOrder","addAddress","form","editAddress","submitOrder","params","findOrderDetail","findOrderList","page","pageSize","orderState","cancelOrder","cancelReason","deleteOrder","ids","confirmOrder","logisticsOrder"],"mappings":"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","file":"js/chunk-ae6172b4.b26407da.js","sourcesContent":["var toObject = require('../internals/to-object');\n\nvar floor = Math.floor;\nvar replace = ''.replace;\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d{1,2}|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d{1,2})/g;\n\n// https://tc39.es/ecma262/#sec-getsubstitution\nmodule.exports = function (matched, str, position, captures, namedCaptures, replacement) {\n  var tailPos = position + matched.length;\n  var m = captures.length;\n  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n  if (namedCaptures !== undefined) {\n    namedCaptures = toObject(namedCaptures);\n    symbols = SUBSTITUTION_SYMBOLS;\n  }\n  return replace.call(replacement, symbols, function (match, ch) {\n    var capture;\n    switch (ch.charAt(0)) {\n      case '$': return '$';\n      case '&': return matched;\n      case '`': return str.slice(0, position);\n      case \"'\": return str.slice(tailPos);\n      case '<':\n        capture = namedCaptures[ch.slice(1, -1)];\n        break;\n      default: // \\d\\d?\n        var n = +ch;\n        if (n === 0) return match;\n        if (n > m) {\n          var f = floor(n / 10);\n          if (f === 0) return match;\n          if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);\n          return match;\n        }\n        capture = captures[n - 1];\n    }\n    return capture === undefined ? '' : capture;\n  });\n};\n","<template>\r\n  <!-- 结算-页面布局 -->\r\n  <div class=\"xtx-pay-checkout-page\">\r\n    <div class=\"container\">\r\n      <XtxBread>\r\n        <XtxBreadItem to=\"/\">首页</XtxBreadItem>\r\n        <XtxBreadItem to=\"/cart\">购物车</XtxBreadItem>\r\n        <XtxBreadItem >填写订单</XtxBreadItem>\r\n      </XtxBread>\r\n      <div class=\"wrapper\" v-if=\"order\">\r\n        <!-- 收货地址 -->\r\n        <h3 class=\"box-title\">收货地址</h3>\r\n        <div class=\"box-body\">\r\n          <!-- 收货地址组件 -->\r\n          <CheckoutAddress @change=\"changeAddress\" :list=\"order.userAddresses\" />\r\n        </div>\r\n        <!-- 商品信息 -->\r\n        <h3 class=\"box-title\">商品信息</h3>\r\n        <div class=\"box-body\">\r\n          <table class=\"goods\">\r\n            <thead>\r\n              <tr>\r\n                <th width=\"520\">商品信息</th>\r\n                <th width=\"170\">单价</th>\r\n                <th width=\"170\">数量</th>\r\n                <th width=\"170\">小计</th>\r\n                <th width=\"170\">实付</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"item in order.goods\" :key=\"item.skuId\">\r\n                <td>\r\n                  <RouterLink :to=\"`/product/${item.id}`\" class=\"info\">\r\n                    <img :src=\"item.picture\" alt=\"\">\r\n                    <div class=\"right\">\r\n                      <p>{{item.name}}</p>\r\n                      <p>{{item.attrsText}}</p>\r\n                    </div>\r\n                  </RouterLink>\r\n                </td>\r\n                <td>&yen;{{item.price}}</td>\r\n                <td>{{item.count}}</td>\r\n                <td>&yen;{{item.totalPrice}}</td>\r\n                <td>&yen;{{item.totalPayPrice}}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <!-- 配送时间 -->\r\n        <h3 class=\"box-title\">配送时间</h3>\r\n        <div class=\"box-body\">\r\n          <a class=\"my-btn active\" href=\"javascript:;\">不限送货时间：周一至周日</a>\r\n          <a class=\"my-btn\" href=\"javascript:;\">工作日送货：周一至周五</a>\r\n          <a class=\"my-btn\" href=\"javascript:;\">双休日、假日送货：周六至周日</a>\r\n        </div>\r\n        <!-- 支付方式 -->\r\n         <h3 class=\"box-title\">支付方式</h3>\r\n        <div class=\"box-body\">\r\n          <a class=\"my-btn active\" href=\"javascript:;\">在线支付</a>\r\n          <a class=\"my-btn\" href=\"javascript:;\">货到付款</a>\r\n          <span style=\"color:#999\">货到付款需付5元手续费</span>\r\n        </div>\r\n        <!-- 金额明细 -->\r\n        <h3 class=\"box-title\">金额明细</h3>\r\n        <div class=\"box-body\">\r\n          <div class=\"total\">\r\n            <dl><dt>商品件数：</dt><dd>{{order.summary.goodsCount}}件</dd></dl>\r\n            <dl><dt>商品总价：</dt><dd>¥{{order.summary.totalPrice}}</dd></dl>\r\n            <dl><dt>运<i></i>费：</dt><dd>¥{{order.summary.postFee}}</dd></dl>\r\n            <dl><dt>应付总额：</dt><dd class=\"price\">¥{{order.summary.totalPayPrice}}</dd></dl>\r\n          </div>\r\n        </div>\r\n        <!-- 提交订单 -->\r\n        <div class=\"submit\">\r\n          <XtxButton @click=\"submitOrderFn\" type=\"primary\">提交订单</XtxButton>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport CheckoutAddress from './components/checkout-address'\r\nimport { createOrder, submitOrder, repurchaseOrder } from '@/api/order'\r\nimport { reactive, ref } from 'vue'\r\nimport Message from '@/components/library/Message'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nexport default {\r\n  name: 'XtxPayCheckoutPage',\r\n  components: { CheckoutAddress },\r\n  setup () {\r\n    // 结算功能-生成订单-订单信息\r\n    const order = ref(null)\r\n    const route = useRoute()\r\n    const store = useStore()\r\n    if (route.query.orderId) {\r\n      // 按照订单中商品结算\r\n      repurchaseOrder(route.query.orderId).then(data => {\r\n        order.value = data.result\r\n        reqParams.goods = data.result.goods.map(({ skuId, count }) => ({ skuId, count }))\r\n      })\r\n    } else {\r\n      // 按照购物车商品结算\r\n      createOrder().then(data => {\r\n        order.value = data.result\r\n        reqParams.goods = data.result.goods.map(({ skuId, count }) => ({ skuId, count }))\r\n      })\r\n    }\r\n\r\n    // 接收收货地址ID\r\n    const changeAddress = (id) => {\r\n      reqParams.addressId = id\r\n    }\r\n\r\n    // 结算功能-提交订单-提交信息\r\n    const reqParams = reactive({\r\n      deliveryTimeType: 1,\r\n      payType: 1,\r\n      payChannel: 1,\r\n      buyerMessage: '',\r\n      // 商品信息，获取订单信息后设置\r\n      goods: [],\r\n      // 收货地址，切换收货地址或者组件默认的时候设置\r\n      addressId: null\r\n    })\r\n\r\n    // 提交订单\r\n    const router = useRouter()\r\n    const submitOrderFn = () => {\r\n      // 检查收货地址是否选好\r\n      if (!reqParams.addressId) {\r\n        return Message({ text: '亲，请选择收货地址' })\r\n      }\r\n      submitOrder(reqParams).then(data => {\r\n        // 清理本地购物车\r\n        store.dispatch('cart/findCart')\r\n        // 提交订单成功\r\n        Message({ type: 'success', text: '提交订单成功' })\r\n        // 跳转支付页面\r\n        router.push(`/member/pay?orderId=${data.result.id}`)\r\n      })\r\n    }\r\n\r\n    return { order, changeAddress, reqParams, submitOrderFn }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.xtx-pay-checkout-page {\r\n  .wrapper {\r\n    background: #fff;\r\n    padding: 0 20px;\r\n    .box-title {\r\n      font-size: 16px;\r\n      font-weight: normal;\r\n      padding-left: 10px;\r\n      line-height: 70px;\r\n      border-bottom: 1px solid #f5f5f5;\r\n    }\r\n    .box-body {\r\n      padding: 20px 0;\r\n    }\r\n  }\r\n}\r\n.goods {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  border-spacing: 0;\r\n  .info {\r\n    display: flex;\r\n    text-align: left;\r\n    img {\r\n      width: 70px;\r\n      height: 70px;\r\n      margin-right: 20px;\r\n    }\r\n    .right {\r\n      line-height: 24px;\r\n      p {\r\n        &:last-child {\r\n          color: #999;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  tr {\r\n    th {\r\n      background: #f5f5f5;\r\n      font-weight: normal;\r\n    }\r\n    td,th {\r\n      text-align: center;\r\n      padding: 20px;\r\n      border-bottom: 1px solid #f5f5f5;\r\n      &:first-child {\r\n        border-left: 1px solid #f5f5f5;\r\n      }\r\n      &:last-child {\r\n        border-right: 1px solid #f5f5f5;\r\n      }\r\n    }\r\n  }\r\n}\r\n.my-btn {\r\n  width: 228px;\r\n  height: 50px;\r\n  border: 1px solid #e4e4e4;\r\n  text-align: center;\r\n  line-height: 48px;\r\n  margin-right: 25px;\r\n  color: #666666;\r\n  display: inline-block;\r\n  &.active,&:hover {\r\n    border-color: @xtxColor;\r\n  }\r\n}\r\n.total {\r\n  dl {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    line-height: 50px;\r\n    dt {\r\n      i {\r\n        display: inline-block;\r\n        width: 2em;\r\n      }\r\n    }\r\n    dd {\r\n      width: 240px;\r\n      text-align: right;\r\n      padding-right: 70px;\r\n      &.price {\r\n        font-size: 20px;\r\n        color: @priceColor;\r\n      }\r\n    }\r\n  }\r\n}\r\n.submit {\r\n  text-align: right;\r\n  padding: 60px;\r\n  border-top: 1px solid #f5f5f5;\r\n}\r\n</style>\r\n","<template>\r\n  <!-- 结算-渲染页面 -->\r\n  <div class=\"checkout-address\">\r\n    <div class=\"text\">\r\n      <div v-if=\"!showAddress\" class=\"none\">您需要先添加收货地址才可提交订单。</div>\r\n      <ul v-if=\"showAddress\">\r\n        <li><span>收<i/>货<i/>人：</span>{{showAddress.receiver}}</li>\r\n        <li><span>联系方式：</span>{{showAddress.contact.replace(/^(\\d{3})\\d{4}(\\d{4})$/,'$1****$2')}}</li>\r\n        <li><span>收货地址：</span>{{showAddress.fullLocation.replace(/ /g,'')}}{{showAddress.address}}</li>\r\n      </ul>\r\n      <a @click=\"openAddressEdit(showAddress)\" v-if=\"showAddress\" href=\"javascript:;\">修改地址</a>\r\n    </div>\r\n    <div class=\"action\">\r\n      <XtxButton @click=\"openDialog()\" class=\"btn\">切换地址</XtxButton>\r\n      <XtxButton @click=\"openAddressEdit({})\" class=\"btn\">添加地址</XtxButton>\r\n    </div>\r\n  </div>\r\n  <!-- 对话框组件-切换收货地址 -->\r\n  <XtxDialog title=\"切换收货地址\" v-model:visible=\"visibleDialog\">\r\n    <div @click=\"selectedAddress=item\" :class=\"{active:selectedAddress&&selectedAddress.id===item.id}\" class=\"text item\" v-for=\"item in list\" :key=\"item.id\">\r\n      <ul>\r\n        <li><span>收<i/>货<i/>人：</span>{{item.receiver}}</li>\r\n        <li><span>联系方式：</span>{{item.contact.replace(/^(\\d{3})\\d{4}(\\d{4})$/,'$1****$2')}}</li>\r\n        <li><span>收货地址：</span>{{item.fullLocation.replace(/ /g,'')+item.address}}</li>\r\n      </ul>\r\n    </div>\r\n    <template #footer>\r\n      <XtxButton @click=\"visibleDialog=false\" type=\"gray\" style=\"margin-right:20px\">取消</XtxButton>\r\n      <XtxButton @click=\"confirmAddressFn\" type=\"primary\">确认</XtxButton>\r\n    </template>\r\n  </XtxDialog>\r\n  <!-- 收货地址添加编辑组件 -->\r\n  <AddressEdit @on-success=\"successHandler\" ref=\"addressEditCom\" />\r\n</template>\r\n<script>\r\nimport { ref } from 'vue'\r\nimport AddressEdit from './address-edit'\r\nexport default {\r\n  name: 'CheckoutAddress',\r\n  components: { AddressEdit },\r\n  props: {\r\n    // 收货地址列表\r\n    list: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  // 1. 在拥有根元素的组件中，触发自定义事件，有没有emits选项无所谓\r\n  // 2. 如果你的组件渲染的代码片段，vue3.0规范，需要在emits中申明你所触发的自定义事件\r\n  // 3. 提倡：你发了自定义事件，需要在emits选项申明下，代码可读性很高\r\n  emits: ['change'],\r\n  setup (props, { emit }) {\r\n    // 1. 找到默认收货地址\r\n    // 2. 没有默认收货地址，使用第一条收货地址\r\n    // 3. 如果没有数据，提示添加\r\n    const showAddress = ref(null)\r\n    const defaultAddress = props.list.find(item => item.isDefault === 0)\r\n    if (defaultAddress) {\r\n      showAddress.value = defaultAddress\r\n    } else {\r\n      if (props.list.length) {\r\n        // 加上一个注释：忽略下面代码的检查eslint\r\n        // eslint-disable-next-line vue/no-setup-props-destructure\r\n        showAddress.value = props.list[0]\r\n      }\r\n    }\r\n\r\n    // 默认通知父组件一个收货地址ID\r\n    emit('change', showAddress.value && showAddress.value.id)\r\n\r\n    // 切换地址对话框显示隐藏\r\n    const visibleDialog = ref(false)\r\n    // 记录当前你选中的地址ID\r\n    const selectedAddress = ref(null)\r\n    const confirmAddressFn = () => {\r\n      // 显示的地址换成呢选中的地址\r\n      showAddress.value = selectedAddress.value\r\n      // 把选中的地址ID通知结算组件\r\n      emit('change', selectedAddress.value?.id)\r\n      visibleDialog.value = false\r\n    }\r\n    const openDialog = () => {\r\n      // 将之前的选中地址改成null\r\n      selectedAddress.value = null\r\n      visibleDialog.value = true\r\n    }\r\n\r\n    // 打开添加编辑收货地址组件\r\n    const addressEditCom = ref(null)\r\n    const openAddressEdit = (address) => {\r\n      // 添加 {}  修改 {数据}\r\n      addressEditCom.value.open(address)\r\n    }\r\n    const successHandler = (formData) => {\r\n      // 根据formData中的ID去当前地址列表中查找，有就是修改，否则是添加\r\n      const address = props.list.find(item => item.id === formData.id)\r\n      if (address) {\r\n        for (const key in address) {\r\n          address[key] = formData[key]\r\n        }\r\n      } else {\r\n        // 如果是添加：往list中追加一条\r\n        // 当你在修改formData的时候，数组中的数据也会更新，因为是同一引用地址。\r\n        // 啥时候修改formData，当你打开对话框需要清空之前的输入信息\r\n        // 克隆formData数据\r\n        const jsonStr = JSON.stringify(formData)\r\n        // eslint-disable-next-line vue/no-mutating-props\r\n        props.list.unshift(JSON.parse(jsonStr))\r\n      }\r\n    }\r\n\r\n    return {\r\n      showAddress,\r\n      visibleDialog,\r\n      selectedAddress,\r\n      confirmAddressFn,\r\n      openDialog,\r\n      openAddressEdit,\r\n      addressEditCom,\r\n      successHandler\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.xtx-dialog {\r\n  .text {\r\n    flex: 1;\r\n    min-height: 90px;\r\n    display: flex;\r\n    align-items: center;\r\n    &.item {\r\n      border: 1px solid #f5f5f5;\r\n      margin-bottom: 10px;\r\n      cursor: pointer;\r\n      &.active,&:hover {\r\n        border-color: @xtxColor;\r\n        background: lighten(@xtxColor,50%);\r\n      }\r\n      > ul {\r\n        padding: 10px;\r\n        font-size: 14px;\r\n        line-height: 30px;\r\n        li {\r\n          word-break: break-all;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.checkout-address {\r\n  border: 1px solid #f5f5f5;\r\n  display: flex;\r\n  align-items: center;\r\n  .text {\r\n    flex: 1;\r\n    min-height: 90px;\r\n    display: flex;\r\n    align-items: center;\r\n    .none {\r\n      line-height: 90px;\r\n      color: #999;\r\n      text-align: center;\r\n      width: 100%;\r\n    }\r\n    > ul {\r\n      flex: 1;\r\n      padding: 20px;\r\n      li {\r\n        line-height: 30px;\r\n        word-break: break-all;\r\n        span {\r\n          color: #999;\r\n          margin-right: 5px;\r\n          > i {\r\n            width: 0.5em;\r\n            display: inline-block;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    > a {\r\n      color: @xtxColor;\r\n      width: 160px;\r\n      text-align: center;\r\n      height: 90px;\r\n      line-height: 90px;\r\n      border-right: 1px solid #f5f5f5;\r\n    }\r\n  }\r\n  .action {\r\n    width: 420px;\r\n    text-align: center;\r\n    .btn {\r\n      width: 140px;\r\n      height: 46px;\r\n      line-height: 44px;\r\n      font-size: 14px;\r\n      &:first-child {\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n <!-- 结算-收货地址-添加 -->\r\n  <XtxDialog :title=\"`${formData.id?'修改':'添加'}收货地址`\" v-model:visible=\"visibleDialog\">\r\n    <!-- 表单 -->\r\n    <div class=\"address-edit\">\r\n      <div class=\"xtx-form\">\r\n        <div class=\"xtx-form-item\">\r\n          <div class=\"label\">收货人：</div>\r\n          <div class=\"field\">\r\n            <input v-model=\"formData.receiver\" class=\"input\" placeholder=\"请输入收货人\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"xtx-form-item\">\r\n          <div class=\"label\">手机号：</div>\r\n          <div class=\"field\">\r\n            <input v-model=\"formData.contact\" class=\"input\" placeholder=\"请输入手机号\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"xtx-form-item\">\r\n          <div class=\"label\">地区：</div>\r\n          <div class=\"field\">\r\n            <XtxCity :fullLocation=\"formData.fullLocation\" @change=\"changeCity\" placeholder=\"请选择所在地区\"/>\r\n          </div>\r\n        </div>\r\n        <div class=\"xtx-form-item\">\r\n          <div class=\"label\">详细地址：</div>\r\n          <div class=\"field\">\r\n            <input v-model=\"formData.address\" class=\"input\" placeholder=\"请输入详细地址\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"xtx-form-item\">\r\n          <div class=\"label\">邮政编码：</div>\r\n          <div class=\"field\">\r\n            <input v-model=\"formData.postalCode\" class=\"input\" placeholder=\"请输入邮政编码\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"xtx-form-item\">\r\n          <div class=\"label\">地址标签：</div>\r\n          <div class=\"field\">\r\n            <input v-model=\"formData.addressTags\" class=\"input\" placeholder=\"请输入地址标签，逗号分隔\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 按钮 -->\r\n    <template #footer>\r\n      <XtxButton @click=\"visibleDialog=false\" type=\"gray\" style=\"margin-right:20px\">取消</XtxButton>\r\n      <XtxButton @click=\"submit()\" type=\"primary\">确认</XtxButton>\r\n    </template>\r\n  </XtxDialog>\r\n</template>\r\n<script>\r\nimport { reactive, ref } from 'vue'\r\nimport { addAddress, editAddress } from '@/api/order'\r\nimport Message from '@/components/library/Message'\r\nexport default {\r\n  name: 'AddressEdit',\r\n  setup (props, { emit }) {\r\n    const visibleDialog = ref(false)\r\n\r\n    // 定义一个open函数，做为打开对话框函数(组件实例拥有open函数)\r\n    const open = (address) => {\r\n      visibleDialog.value = true\r\n      if (address.id) {\r\n        // 如果修改 填充表单\r\n        for (const key in address) {\r\n          formData[key] = address[key]\r\n        }\r\n      } else {\r\n        // 如果添加 清空表单\r\n        for (const key in formData) {\r\n          if (key === 'isDefault') {\r\n            formData[key] = 1\r\n          } else {\r\n            formData[key] = null\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 定义表单数据对象\r\n    const formData = reactive({\r\n      receiver: null,\r\n      contact: null,\r\n      provinceCode: null,\r\n      cityCode: null,\r\n      countyCode: null,\r\n      address: null,\r\n      postalCode: null,\r\n      addressTags: null,\r\n      isDefault: 1,\r\n      // 城市组件显示文字（完整行政区地址）\r\n      fullLocation: null\r\n    })\r\n\r\n    // 城市选中\r\n    const changeCity = (result) => {\r\n      formData.provinceCode = result.provinceCode\r\n      formData.cityCode = result.cityCode\r\n      formData.countyCode = result.countyCode\r\n      formData.fullLocation = result.fullLocation\r\n    }\r\n\r\n    // 添加时候的提交操作（修改）\r\n    const submit = () => {\r\n      // 1. 省略了校验\r\n      if (!formData.receiver) {\r\n        return Message({ text: '请输入收货人' })\r\n      }\r\n      if (formData.receiver.length > 20) {\r\n        return Message({ text: '收货人20个字符内' })\r\n      }\r\n      if (!formData.contact) {\r\n        return Message({ text: '请输入手机号' })\r\n      }\r\n      if (!/^1[3-9]\\d{9}$/.test(formData.contact)) {\r\n        return Message({ text: '手机号格式不对' })\r\n      }\r\n      if (!formData.fullLocation) {\r\n        return Message({ text: '请选择收货地区' })\r\n      }\r\n      if (!formData.address) {\r\n        return Message({ text: '请输入详细地址' })\r\n      }\r\n      if (formData.address.length > 50) {\r\n        return Message({ text: '详细地址50个字符内' })\r\n      }\r\n      if (formData.postalCode && !/^\\d{6}$/.test(formData.postalCode)) {\r\n        return Message({ text: '邮政编码格式不对' })\r\n      }\r\n      if (formData.addressTags && formData.addressTags.length > 20) {\r\n        return Message({ text: '地址标签20个字符内' })\r\n      }\r\n\r\n      // 2. 发送请求了\r\n      if (formData.id) {\r\n        // 修改请求\r\n        editAddress(formData).then(data => {\r\n          // 提示\r\n          Message({ type: 'success', text: '修改收货地址成功' })\r\n          // 关闭\r\n          visibleDialog.value = false\r\n          // 触发自定义事件\r\n          emit('on-success', formData)\r\n        })\r\n      } else {\r\n        // 添加请求\r\n        addAddress(formData).then(data => {\r\n          // 需要设置ID\r\n          formData.id = data.result.id\r\n          // 提示\r\n          Message({ type: 'success', text: '添加收货地址成功' })\r\n          // 关闭\r\n          visibleDialog.value = false\r\n          // 触发自定义事件\r\n          emit('on-success', formData)\r\n        })\r\n      }\r\n    }\r\n\r\n    return { visibleDialog, open, formData, changeCity, submit }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.xtx-dialog {\r\n  :deep(.wrapper){\r\n    width: 780px;\r\n    .body {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n}\r\n.xtx-form {\r\n  padding: 0;\r\n  input {\r\n    outline: none;\r\n    &::placeholder {\r\n      color: #ccc;\r\n    }\r\n  }\r\n}\r\n.xtx-city {\r\n  width: 320px;\r\n  :deep(.select) {\r\n    height: 50px;\r\n    line-height: 48px;\r\n    display: flex;\r\n    padding: 0 10px;\r\n    justify-content: space-between;\r\n    .placeholder {\r\n      color: #ccc;\r\n    }\r\n    i {\r\n      color: #ccc;\r\n      font-size: 18px;\r\n    }\r\n    .value {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n  :deep(.option) {\r\n    top: 49px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./address-edit.vue?vue&type=template&id=2fbf0199&scoped=true\"\nimport script from \"./address-edit.vue?vue&type=script&lang=js\"\nexport * from \"./address-edit.vue?vue&type=script&lang=js\"\n\nimport \"./address-edit.vue?vue&type=style&index=0&id=2fbf0199&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-2fbf0199\"\n\nexport default script","import { render } from \"./checkout-address.vue?vue&type=template&id=8fb63e76&scoped=true\"\nimport script from \"./checkout-address.vue?vue&type=script&lang=js\"\nexport * from \"./checkout-address.vue?vue&type=script&lang=js\"\n\nimport \"./checkout-address.vue?vue&type=style&index=0&id=8fb63e76&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-8fb63e76\"\n\nexport default script","import { render } from \"./checkout.vue?vue&type=template&id=469ac7a6&scoped=true\"\nimport script from \"./checkout.vue?vue&type=script&lang=js\"\nexport * from \"./checkout.vue?vue&type=script&lang=js\"\n\nimport \"./checkout.vue?vue&type=style&index=0&id=469ac7a6&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-469ac7a6\"\n\nexport default script","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./checkout-address.vue?vue&type=style&index=0&id=8fb63e76&scoped=true&lang=less\"","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar getSubstitution = require('../internals/get-substitution');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\nvar max = Math.max;\nvar min = Math.min;\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', 2, function (REPLACE, nativeReplace, maybeCallNative, reason) {\n  var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = reason.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE;\n  var REPLACE_KEEPS_$0 = reason.REPLACE_KEEPS_$0;\n  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';\n\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.es/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = searchValue == undefined ? undefined : searchValue[REPLACE];\n      return replacer !== undefined\n        ? replacer.call(searchValue, O, replaceValue)\n        : nativeReplace.call(String(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace\n    function (regexp, replaceValue) {\n      if (\n        (!REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE && REPLACE_KEEPS_$0) ||\n        (typeof replaceValue === 'string' && replaceValue.indexOf(UNSAFE_SUBSTITUTE) === -1)\n      ) {\n        var res = maybeCallNative(nativeReplace, regexp, this, replaceValue);\n        if (res.done) return res.value;\n      }\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var functionalReplace = typeof replaceValue === 'function';\n      if (!functionalReplace) replaceValue = String(replaceValue);\n\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n\n        results.push(result);\n        if (!global) break;\n\n        var matchStr = String(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = String(result[0]);\n        var position = max(min(toInteger(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = [matched].concat(captures, position, S);\n          if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);\n          var replacement = String(replaceValue.apply(undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += S.slice(nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + S.slice(nextSourcePosition);\n    }\n  ];\n});\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./checkout.vue?vue&type=style&index=0&id=469ac7a6&scoped=true&lang=less\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./address-edit.vue?vue&type=style&index=0&id=2fbf0199&scoped=true&lang=less\"","// 订单相关的API函数\r\n\r\nimport request from '@/utils/request'\r\n\r\n/**\r\n * 结算页面-生成订单-根据购物车选中商品\r\n * @returns\r\n */\r\nexport const createOrder = () => {\r\n  return request('/member/order/pre', 'get')\r\n}\r\n\r\n/**\r\n * 结算页面-生成订单-根据订单中商品-再次购买\r\n * @returns\r\n */\r\nexport const repurchaseOrder = (orderId) => {\r\n  return request('/member/order/repurchase/' + orderId, 'get')\r\n}\r\n\r\n/**\r\n * 添加收货地址\r\n * @param {Object} form - 参考接口文档\r\n */\r\nexport const addAddress = (form) => {\r\n  return request('/member/address', 'post', form)\r\n}\r\n\r\n/**\r\n * 修改收货地址\r\n * @param {Object} form - 参考接口文档\r\n */\r\nexport const editAddress = (form) => {\r\n  return request(`/member/address/${form.id}`, 'put', form)\r\n}\r\n\r\n/**\r\n * 结算页面-提交订单\r\n * @param {Object} params - 参考接口文档\r\n * @returns\r\n */\r\nexport const submitOrder = (params) => {\r\n  return request('/member/order', 'post', params)\r\n}\r\n\r\n/**\r\n * 获取订单详细\r\n * @param {String} orderId - 订单ID\r\n * @returns\r\n */\r\nexport const findOrderDetail = (orderId) => {\r\n  return request('/member/order/' + orderId, 'get')\r\n}\r\n/**\r\n * 获取订单列表\r\n * @param {String} page - 页码\r\n * @param {String} pageSize - 每页条数\r\n * @param {String} orderState - 订单状态，1为待付款、2为待发货、3为待收货、4为待评价、5为已完成、6为已取消，未传该参数或0为全部\r\n * @returns\r\n */\r\nexport const findOrderList = ({ page = 1, pageSize = 10, orderState = 0 }) => {\r\n  return request('/member/order', 'get', { page, pageSize, orderState })\r\n}\r\n\r\n/**\r\n * 取消订单\r\n * @param {String} orderId - 订单ID\r\n * @param {String} cancelReason - 取消原因\r\n * @returns\r\n */\r\nexport const cancelOrder = ({ orderId, cancelReason }) => {\r\n  return request(`/member/order/${orderId}/cancel`, 'put', { cancelReason })\r\n}\r\n\r\n/**\r\n * 删除订单\r\n * @param {String} orderId - 订单ID\r\n * @returns\r\n */\r\nexport const deleteOrder = (orderId) => {\r\n  return request('/member/order', 'delete', { ids: [orderId] })\r\n}\r\n\r\n/**\r\n * 确认收货\r\n * @param {String} orderId - 订单ID\r\n * @returns\r\n */\r\nexport const confirmOrder = (orderId) => {\r\n  return request(`/member/order/${orderId}/receipt`, 'put')\r\n}\r\n\r\n/**\r\n * 查询物流\r\n * @param {String} orderId - 订单ID\r\n * @returns\r\n */\r\nexport const logisticsOrder = (orderId) => {\r\n  return request(`/member/order/${orderId}/logistics`, 'get')\r\n}\r\n"],"sourceRoot":""}