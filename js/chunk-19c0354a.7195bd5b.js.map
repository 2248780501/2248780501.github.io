{"version":3,"sources":["webpack:///./src/views/category/sub.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/views/category/components/sub-bread.vue","webpack:///./src/views/category/components/sub-bread.vue?36ee","webpack:///./src/views/category/components/sub-filter.vue","webpack:///./src/views/category/components/sub-filter.vue?cc7c","webpack:///./src/views/category/components/sub-sort.vue","webpack:///./src/views/category/components/sub-sort.vue?2727","webpack:///./src/views/category/sub.vue?6147","webpack:///./src/views/category/sub.vue?46f7","webpack:///./node_modules/core-js/modules/es.string.sub.js","webpack:///./src/views/category/components/sub-sort.vue?82e6","webpack:///./src/views/category/components/goods-item.vue?dae1","webpack:///./src/views/category/components/goods-item.vue","webpack:///./src/views/category/components/goods-item.vue?32cc","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./src/views/category/components/sub-filter.vue?6e32"],"names":["class","filterChange","sortChange","goodsList","goods","key","id","loading","finished","getData","_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","to","category","top","name","mode","sub","setup","route","store","cate","state","list","forEach","children","find","params","render","filterData","filterLoading","brands","item","selectedBrand","title","changeBrand","href","saleProperties","properties","prop","selectedProp","changeProp","width","height","props","emit","newVal","path","value","then","data","result","unshift","immediate","getFilterParams","obj","brandId","attrs","push","groupName","propertyName","length","propId","__scopeId","sortParams","sortField","changeSort","sortMethod","changeCheck","inventory","onlyDiscount","components","SubBread","SubFilter","SubSort","GoodsItem","reqParams","page","pageSize","categoryId","items","filterParams","$","createHTML","forcedStringHTMLMethod","target","proto","forced","this","alt","isLink","picture","desc","price","type","Object","default","Boolean","requireObjectCoercible","quot","module","exports","string","tag","attribute","S","String","p1","replace","fails","METHOD_NAME","test","toLowerCase","split"],"mappings":"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","file":"js/chunk-19c0354a.7195bd5b.js","sourcesContent":["<template>\r\n  <!-- 二级类目-结果区-数据加载 -->\r\n  <div class=\"sub-categroy\">\r\n    <div class=\"container\">\r\n      <!-- 面包屑 -->\r\n      <SubBread />\r\n      <!-- 筛选区 -->\r\n      <SubFilter @filter-change=\"filterChange\" />\r\n      <!-- 商品面板（排序+列表） -->\r\n      <div class=\"goods-list\">\r\n        <SubSort @sort-change=\"sortChange\" />\r\n        <ul>\r\n          <li v-for=\"goods in goodsList\" :key=\"goods.id\" >\r\n            <GoodsItem :goods=\"goods\" />\r\n          </li>\r\n        </ul>\r\n        <!-- 无限加载组件 -->\r\n        <XtxInfiniteLoading :loading=\"loading\" :finished=\"finished\" @infinite=\"getData\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport SubBread from './components/sub-bread'\r\nimport SubFilter from './components/sub-filter'\r\nimport SubSort from './components/sub-sort'\r\nimport GoodsItem from './components/goods-item'\r\nimport { ref, watch } from 'vue'\r\nimport { findSubCategoryGoods } from '@/api/category'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'SubCategory',\r\n  components: { SubBread, SubFilter, SubSort, GoodsItem },\r\n  setup () {\r\n    const route = useRoute()\r\n    // 加载中\r\n    const loading = ref(false)\r\n    // 是否加载完毕\r\n    const finished = ref(false)\r\n    // 商品列表数据\r\n    const goodsList = ref([])\r\n    // 请求参数\r\n    let reqParams = {\r\n      page: 1,\r\n      pageSize: 20\r\n    }\r\n    const getData = () => {\r\n      loading.value = true\r\n      // 设置二级分类的ID\r\n      reqParams.categoryId = route.params.id\r\n      findSubCategoryGoods(reqParams).then(({ result }) => {\r\n        // 获取数据成功\r\n        if (result.items.length) {\r\n          // 有数据就追加数据\r\n          goodsList.value.push(...result.items)\r\n          // 把page改成下一页页码\r\n          reqParams.page++\r\n        } else {\r\n          // 没有数据，代表加载完成\r\n          finished.value = true\r\n        }\r\n        loading.value = false\r\n      })\r\n    }\r\n    // 在更改了二级分类的时候需要重新加载数据\r\n    watch(() => route.params.id, (newVal) => {\r\n      if (newVal && `/category/sub/${newVal}` === route.path) {\r\n        finished.value = false\r\n        goodsList.value = [] // 导致列表空的，加载更多组件顶上来，进入可视区，区加载数据\r\n        reqParams = {\r\n          page: 1,\r\n          pageSize: 20\r\n        }\r\n      }\r\n    })\r\n    // 1. 更改排序组件的筛选数据，重新请求\r\n    const sortChange = (sortParams) => {\r\n      finished.value = false\r\n      // 合并请求参数，保留之前参数\r\n      reqParams = { ...reqParams, ...sortParams }\r\n      reqParams.page = 1\r\n      goodsList.value = []\r\n      getData()\r\n    }\r\n    // 2. 更改筛选组件的筛选数据，重新请求\r\n    const filterChange = (filterParams) => {\r\n      finished.value = false\r\n      // 合并请求参数，保留之前参数\r\n      reqParams = { ...reqParams, ...filterParams }\r\n      reqParams.page = 1\r\n      goodsList.value = []\r\n      getData()\r\n    }\r\n\r\n    return { loading, finished, getData, goodsList, sortChange, filterChange }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.goods-list {\r\n  background: #fff;\r\n  padding: 0 25px;\r\n  margin-top: 25px;\r\n  ul {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    padding: 0 5px;\r\n    li {\r\n      margin-right: 20px;\r\n      margin-bottom: 20px;\r\n      &:nth-child(5n) {\r\n        margin-right: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","<template>\r\n <!-- 二级类目-展示面包屑 -->\r\n  <XtxBread>\r\n    <XtxBreadItem to=\"/\">首页</XtxBreadItem>\r\n    <XtxBreadItem :key=\"category.top.id\" v-if=\"category.top\" :to=\"`/category/${category.top.id}`\">{{category.top.name}}</XtxBreadItem>\r\n    <Transition name=\"fade-right\" mode=\"out-in\">\r\n      <XtxBreadItem :key=\"category.sub.id\" v-if=\"category.sub\">{{category.sub.name}}</XtxBreadItem>\r\n    </Transition>\r\n  </XtxBread>\r\n</template>\r\n<script>\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nimport { computed } from 'vue'\r\nexport default {\r\n  name: 'SubBread',\r\n  setup () {\r\n    // 通过计算属性从vuex获取顶级和二级类目信息\r\n    // 数据对象：{top:{id,name},sub:{id:name}}\r\n    const route = useRoute()\r\n    const store = useStore()\r\n    const category = computed(() => {\r\n      const cate = {}\r\n      // 完成获取数据逻辑\r\n      store.state.category.list.forEach(top => {\r\n        if (top.children) {\r\n          const sub = top.children.find(sub => sub.id === route.params.id)\r\n          if (sub) {\r\n            cate.top = { id: top.id, name: top.name }\r\n            cate.sub = { id: sub.id, name: sub.name }\r\n          }\r\n        }\r\n      })\r\n      return cate\r\n    })\r\n\r\n    return { category }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\"></style>\r\n","import { render } from \"./sub-bread.vue?vue&type=template&id=375ac58e\"\nimport script from \"./sub-bread.vue?vue&type=script&lang=js\"\nexport * from \"./sub-bread.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n <!-- 二级类目-筛选区展示 -->\r\n  <div class=\"sub-filter\" v-if=\"filterData && !filterLoading\">\r\n    <div class=\"item\">\r\n      <div class=\"head\">品牌：</div>\r\n      <div class=\"body\">\r\n        <a class=\"ellipsis\" :title=\"item.name\" @click=\"changeBrand(item.id)\" :class=\"{active:item.id===filterData.selectedBrand}\" href=\"javascript:;\" v-for=\"item in filterData.brands\" :key=\"item.id\">{{item.name}}</a>\r\n      </div>\r\n    </div>\r\n    <div class=\"item\" v-for=\"item in filterData.saleProperties\" :key=\"item.id\">\r\n      <div class=\"head\">{{item.name}}：</div>\r\n      <div class=\"body\">\r\n        <a class=\"ellipsis\" :title=\"prop.name\" @click=\"changeProp(item,prop.id)\" :class=\"{active:prop.id===item.selectedProp}\" href=\"javascript:;\" v-for=\"prop in item.properties\" :key=\"prop.id\">{{prop.name}}</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div v-else class=\"sub-filter\">\r\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\r\n  </div>\r\n</template>\r\n<script>\r\nimport { ref, watch } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { findSubCategoryFilter } from '@/api/category'\r\nexport default {\r\n  name: 'SubFilter',\r\n  setup (props, { emit }) {\r\n    const route = useRoute()\r\n    // 监听二级类目ID的变化获取筛选数据\r\n    const filterData = ref(null)\r\n    const filterLoading = ref(false)\r\n    watch(() => route.params.id, (newVal) => {\r\n      // 变化后的ID有值 且 处在二级类名路由下\r\n      if (newVal && `/category/sub/${newVal}` === route.path) {\r\n        filterLoading.value = true\r\n        // 发请求获取数据\r\n        findSubCategoryFilter(route.params.id).then(data => {\r\n          // 每一组可选的筛选条件缺失 全部 条件，处理下数据加上全部\r\n          // 给每一组数据加上一个选中的ID\r\n          // 1. 品牌\r\n          data.result.selectedBrand = null\r\n          data.result.brands.unshift({ id: null, name: '全部' })\r\n          // 2. 属性\r\n          data.result.saleProperties.forEach(item => {\r\n            item.selectedProp = null\r\n            item.properties.unshift({ id: null, name: '全部' })\r\n          })\r\n          // 设置修改的数据\r\n          filterData.value = data.result\r\n          filterLoading.value = false\r\n        })\r\n      }\r\n    }, { immediate: true })\r\n\r\n    // 获取筛选参数的函数\r\n    const getFilterParams = () => {\r\n      const obj = { brandId: null, attrs: [] }\r\n      // 品牌\r\n      obj.brandId = filterData.value.selectedBrand\r\n      // 销售属性\r\n      filterData.value.saleProperties.forEach(item => {\r\n        if (item.selectedProp) {\r\n          const prop = item.properties.find(prop => prop.id === item.selectedProp)\r\n          obj.attrs.push({ groupName: item.name, propertyName: prop.name })\r\n        }\r\n      })\r\n      // 参考数据：{brandId:'',attrs:[{groupName:'',propertyName:''},...]}\r\n      if (obj.attrs.length === 0) obj.attrs = null\r\n      return obj\r\n    }\r\n\r\n    // 1. 记录当前选择的品牌\r\n    const changeBrand = (brandId) => {\r\n      if (filterData.value.selectedBrand === brandId) return\r\n      filterData.value.selectedBrand = brandId\r\n      emit('filter-change', getFilterParams())\r\n    }\r\n    // 2. 记录呢选择的销售属性\r\n    const changeProp = (item, propId) => {\r\n      if (item.selectedProp === propId) return\r\n      item.selectedProp = propId\r\n      emit('filter-change', getFilterParams())\r\n    }\r\n\r\n    return { filterData, filterLoading, changeBrand, changeProp }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang='less'>\r\n  // 筛选区\r\n  .sub-filter {\r\n    background: #fff;\r\n    padding: 25px;\r\n    .item {\r\n      display: flex;\r\n      .head {\r\n        width: 80px;\r\n        color: #999;\r\n        line-height: 40px;\r\n      }\r\n      .body {\r\n        flex: 1;\r\n        a {\r\n          margin-right: 36px;\r\n          transition: all .3s;\r\n          display: inline-block;\r\n          max-width: 112px;\r\n          line-height: 40px;\r\n          &.active,\r\n          &:hover {\r\n            color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .xtx-skeleton {\r\n      padding: 10px 0;\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./sub-filter.vue?vue&type=template&id=50c38d81&scoped=true\"\nimport script from \"./sub-filter.vue?vue&type=script&lang=js\"\nexport * from \"./sub-filter.vue?vue&type=script&lang=js\"\n\nimport \"./sub-filter.vue?vue&type=style&index=0&id=50c38d81&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-50c38d81\"\n\nexport default script","<template>\r\n  <!-- -二级类目-结果区- -->\r\n  <div class='sub-sort'>\r\n    <div class=\"sort\">\r\n      <a :class=\"{active:sortParams.sortField===null}\" @click=\"changeSort(null)\" href=\"javascript:;\">默认排序</a>\r\n      <a :class=\"{active:sortParams.sortField==='publishTime'}\" @click=\"changeSort('publishTime')\" href=\"javascript:;\">最新商品</a>\r\n      <a :class=\"{active:sortParams.sortField==='orderNum'}\" @click=\"changeSort('orderNum')\" href=\"javascript:;\">最高人气</a>\r\n      <a :class=\"{active:sortParams.sortField==='evaluateNum'}\" @click=\"changeSort('evaluateNum')\" href=\"javascript:;\">评论最多</a>\r\n      <a @click=\"changeSort('price')\" href=\"javascript:;\">\r\n        价格排序\r\n        <i class=\"arrow up\" :class=\"{active:sortParams.sortField==='price'&&sortParams.sortMethod==='asc'}\" />\r\n        <i class=\"arrow down\" :class=\"{active:sortParams.sortField==='price'&&sortParams.sortMethod==='desc'}\" />\r\n      </a>\r\n    </div>\r\n    <div class=\"check\">\r\n      <XtxCheckbox @change=\"changeCheck\" v-model=\"sortParams.inventory\">仅显示有货商品</XtxCheckbox>\r\n      <XtxCheckbox @change=\"changeCheck\" v-model=\"sortParams.onlyDiscount\">仅显示特惠商品</XtxCheckbox>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { reactive } from 'vue'\r\nexport default {\r\n  name: 'SubSort',\r\n  setup (props, { emit }) {\r\n    // 实现交互（实现交换的数据和后台保持一致）\r\n    // 1. 明确交互数据\r\n    const sortParams = reactive({\r\n      inventory: false,\r\n      onlyDiscount: false,\r\n      sortField: null, // publishTime,orderNum,price,evaluateNum\r\n      sortMethod: null // asc为正序，desc为倒序，默认为desc\r\n    })\r\n    // 2. 提供模板使用\r\n    // 3. 需要绑定按钮的点击事件修改排序字段和排序方式\r\n    const changeSort = (sortField) => {\r\n      if (sortField === 'price') {\r\n        sortParams.sortField = sortField\r\n        // 处理排序\r\n        if (sortParams.sortMethod === null) {\r\n          sortParams.sortMethod = 'desc'\r\n        } else {\r\n          sortParams.sortMethod = sortParams.sortMethod === 'desc' ? 'asc' : 'desc'\r\n        }\r\n      } else {\r\n        // 如果已经选项阻止运行\r\n        if (sortParams.sortField === sortField) return\r\n        sortParams.sortField = sortField\r\n        sortParams.sortMethod = null\r\n      }\r\n      // 触发 sort-change 事件\r\n      emit('sort-change', sortParams)\r\n    }\r\n    const changeCheck = () => {\r\n      // 触发 sort-change 事件\r\n      emit('sort-change', sortParams)\r\n    }\r\n    return { sortParams, changeSort, changeCheck }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang='less'>\r\n.sub-sort {\r\n  height: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .sort {\r\n    display: flex;\r\n    a {\r\n      height: 30px;\r\n      line-height: 28px;\r\n      border: 1px solid #e4e4e4;\r\n      padding: 0 20px;\r\n      margin-right: 20px;\r\n      color: #999;\r\n      border-radius: 2px;\r\n      position: relative;\r\n      transition: all .3s;\r\n      &.active {\r\n        background: @xtxColor;\r\n        border-color: @xtxColor;\r\n        color: #fff;\r\n      }\r\n      .arrow {\r\n        position: absolute;\r\n        border: 5px solid transparent;\r\n        right: 8px;\r\n        &.up {\r\n          top: 3px;\r\n          border-bottom-color: #bbb;\r\n            &.active {\r\n            border-bottom-color: @xtxColor;\r\n          }\r\n        }\r\n        &.down {\r\n          top: 15px;\r\n          border-top-color: #bbb;\r\n          &.active {\r\n            border-top-color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .check {\r\n    .xtx-checkbox {\r\n      margin-left: 20px;\r\n      color: #999;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./sub-sort.vue?vue&type=template&id=7f0b11b5&scoped=true\"\nimport script from \"./sub-sort.vue?vue&type=script&lang=js\"\nexport * from \"./sub-sort.vue?vue&type=script&lang=js\"\n\nimport \"./sub-sort.vue?vue&type=style&index=0&id=7f0b11b5&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-7f0b11b5\"\n\nexport default script","import { render } from \"./sub.vue?vue&type=template&id=3029972c&scoped=true\"\nimport script from \"./sub.vue?vue&type=script&lang=js\"\nexport * from \"./sub.vue?vue&type=script&lang=js\"\n\nimport \"./sub.vue?vue&type=style&index=0&id=3029972c&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-3029972c\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sub.vue?vue&type=style&index=0&id=3029972c&scoped=true&lang=less\"","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.sub` method\n// https://tc39.es/ecma262/#sec-string.prototype.sub\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {\n  sub: function sub() {\n    return createHTML(this, 'sub', '', '');\n  }\n});\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sub-sort.vue?vue&type=style&index=0&id=7f0b11b5&scoped=true&lang=less\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./goods-item.vue?vue&type=style&index=0&id=3d940a34&scoped=true&lang=less\"","<template>\r\n <!-- 顶级类目-分类商品-布局 -->\r\n  <RouterLink v-if=\"isLink\" :to=\"`/product/${goods.id}`\" class='goods-item'>\r\n    <img v-lazy=\"goods.picture\" alt=\"\">\r\n    <p class=\"name ellipsis\">{{goods.name}}</p>\r\n    <p class=\"desc ellipsis\">{{goods.desc}}</p>\r\n    <p class=\"price\">&yen;{{goods.price}}</p>\r\n  </RouterLink>\r\n  <a v-else href=\"javascript:;\" class='goods-item'>\r\n    <img v-lazy=\"goods.picture\" alt=\"\">\r\n    <p class=\"name ellipsis\">{{goods.name}}</p>\r\n    <p class=\"desc ellipsis\">{{goods.desc}}</p>\r\n    <p class=\"price\">&yen;{{goods.price}}</p>\r\n  </a>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GoodsItem',\r\n  props: {\r\n    goods: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    isLink: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.goods-item {\r\n  display: block;\r\n  width: 220px;\r\n  padding: 20px 30px;\r\n  text-align: center;\r\n  .hoverShadow();\r\n  img {\r\n    width: 160px;\r\n    height: 160px;\r\n  }\r\n  p {\r\n    padding-top: 10px;\r\n  }\r\n  .name {\r\n    font-size: 16px;\r\n  }\r\n  .desc {\r\n    color: #999;\r\n    height: 29px;\r\n  }\r\n  .price {\r\n    color: @priceColor;\r\n    font-size: 20px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./goods-item.vue?vue&type=template&id=3d940a34&scoped=true\"\nimport script from \"./goods-item.vue?vue&type=script&lang=js\"\nexport * from \"./goods-item.vue?vue&type=script&lang=js\"\n\nimport \"./goods-item.vue?vue&type=style&index=0&id=3d940a34&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-3d940a34\"\n\nexport default script","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.es/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sub-filter.vue?vue&type=style&index=0&id=50c38d81&scoped=true&lang=less\""],"sourceRoot":""}