(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7febea6e"],{"351f":function(e,c,t){},6944:function(e,c,t){},"72b4":function(e,c,t){e.exports=t.p+"img/qrcode.5372a064.jpg"},"9ed6":function(e,c,t){"use strict";t.r(c);var o=t("7a23"),a=t("72b4"),r=t.n(a),n=Object(o["withScopeId"])("data-v-45b56284");Object(o["pushScopeId"])("data-v-45b56284");var i=Object(o["createTextVNode"])("欢迎登录"),l={class:"login-section"},s={class:"wrapper"},d=Object(o["createTextVNode"])("表单"),u={key:1,class:"qrcode-box"},b=Object(o["createVNode"])("img",{src:r.a,alt:""},null,-1),j=Object(o["createVNode"])("p",null,[Object(o["createTextVNode"])("打开 "),Object(o["createVNode"])("a",{href:"javascript:;"},"小刀购App"),Object(o["createTextVNode"])(" 扫码登录")],-1);Object(o["popScopeId"])();var m=n((function(e,c,t,a,r,m){var p=Object(o["resolveComponent"])("LoginHeader"),O=Object(o["resolveComponent"])("LoginForm"),f=Object(o["resolveComponent"])("LoginFooter");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(p,null,{default:n((function(){return[i]})),_:1}),Object(o["createVNode"])("section",l,[Object(o["createVNode"])("div",s,[Object(o["createVNode"])("nav",null,[Object(o["createVNode"])("a",{onClick:c[1]||(c[1]=function(e){return a.activeName="account"}),class:{active:"account"===a.activeName},href:"javascript:;"},"账户登录",2),Object(o["createVNode"])("a",{onClick:c[2]||(c[2]=function(e){return a.activeName="qrcode"}),class:{active:"qrcode"===a.activeName},href:"javascript:;"},"扫码登录",2)]),"account"===a.activeName?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0},{default:n((function(){return[d]})),_:1})):Object(o["createCommentVNode"])("",!0),"qrcode"===a.activeName?(Object(o["openBlock"])(),Object(o["createBlock"])("div",u,[b,j])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])(f)],64)})),p=t("cc8e"),O=t("136e"),f=Object(o["withScopeId"])("data-v-1847cec5");Object(o["pushScopeId"])("data-v-1847cec5");var v={class:"account-box"},V={class:"toggle"},N=Object(o["createVNode"])("i",{class:"iconfont icon-user"},null,-1),g=Object(o["createTextVNode"])(" 使用账号登录 "),k=Object(o["createVNode"])("i",{class:"iconfont icon-msg"},null,-1),h=Object(o["createTextVNode"])(" 使用短信登录 "),w={class:"form-item"},x={class:"input"},y=Object(o["createVNode"])("i",{class:"iconfont icon-user"},null,-1),B={key:0,class:"error"},C=Object(o["createVNode"])("i",{class:"iconfont icon-warning"},null,-1),F={class:"form-item"},q={class:"input"},L=Object(o["createVNode"])("i",{class:"iconfont icon-lock"},null,-1),S={key:0,class:"error"},U=Object(o["createVNode"])("i",{class:"iconfont icon-warning"},null,-1),_={class:"form-item"},T={class:"input"},A=Object(o["createVNode"])("i",{class:"iconfont icon-user"},null,-1),I={key:0,class:"error"},D=Object(o["createVNode"])("i",{class:"iconfont icon-warning"},null,-1),R={class:"form-item"},M={class:"input"},z=Object(o["createVNode"])("i",{class:"iconfont icon-code"},null,-1),H={key:0,class:"error"},J=Object(o["createVNode"])("i",{class:"iconfont icon-warning"},null,-1),E={class:"form-item"},P={class:"agree"},X=Object(o["createVNode"])("span",null,"我已同意",-1),G=Object(o["createVNode"])("a",{href:"javascript:;"},"《隐私条款》",-1),K=Object(o["createVNode"])("span",null,"和",-1),Q=Object(o["createVNode"])("a",{href:"javascript:;"},"《服务条款》",-1),W={key:0,class:"error"},Y=Object(o["createVNode"])("i",{class:"iconfont icon-warning"},null,-1),Z=Object(o["createStaticVNode"])('<div class="action" data-v-1847cec5><a data-v-1847cec5><img src="https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png" alt="" data-v-1847cec5></a><div class="url" data-v-1847cec5><a href="javascript:;" data-v-1847cec5>忘记密码</a><a href="javascript:;" data-v-1847cec5>免费注册</a></div></div>',1);Object(o["popScopeId"])();var $=f((function(e,c,t,a,r,n){var i=Object(o["resolveComponent"])("Field"),l=Object(o["resolveComponent"])("Form");return Object(o["openBlock"])(),Object(o["createBlock"])("div",v,[Object(o["createVNode"])("div",V,[a.isMsgLogin?(Object(o["openBlock"])(),Object(o["createBlock"])("a",{key:0,onClick:c[1]||(c[1]=function(e){return a.isMsgLogin=!1}),href:"javascript:;"},[N,g])):(Object(o["openBlock"])(),Object(o["createBlock"])("a",{key:1,onClick:c[2]||(c[2]=function(e){return a.isMsgLogin=!0}),href:"javascript:;"},[k,h]))]),Object(o["createVNode"])(l,{ref:"formCom",class:"form","validation-schema":a.schema,autocomplete:"off"},{default:f((function(e){var t=e.errors;return[a.isMsgLogin?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:1},[Object(o["createVNode"])("div",_,[Object(o["createVNode"])("div",T,[A,Object(o["createVNode"])(i,{class:{error:t.mobile},modelValue:a.form.mobile,"onUpdate:modelValue":c[5]||(c[5]=function(e){return a.form.mobile=e}),name:"mobile",type:"text",placeholder:"请输入手机号"},null,8,["class","modelValue"])]),t.mobile?(Object(o["openBlock"])(),Object(o["createBlock"])("div",I,[D,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.mobile),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",R,[Object(o["createVNode"])("div",M,[z,Object(o["createVNode"])(i,{class:{error:t.code},modelValue:a.form.code,"onUpdate:modelValue":c[6]||(c[6]=function(e){return a.form.code=e}),name:"code",type:"text",placeholder:"请输入验证码"},null,8,["class","modelValue"]),Object(o["createVNode"])("span",{onClick:c[7]||(c[7]=function(e){return a.send()}),class:"code"},Object(o["toDisplayString"])(0===a.time?"发送验证码":"".concat(a.time,"秒后发送")),1)]),t.code?(Object(o["openBlock"])(),Object(o["createBlock"])("div",H,[J,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.code),1)])):Object(o["createCommentVNode"])("",!0)])],64)):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])("div",w,[Object(o["createVNode"])("div",x,[y,Object(o["createVNode"])(i,{class:{error:t.account},modelValue:a.form.account,"onUpdate:modelValue":c[3]||(c[3]=function(e){return a.form.account=e}),name:"account",type:"text",placeholder:"请输入用户名"},null,8,["class","modelValue"])]),t.account?(Object(o["openBlock"])(),Object(o["createBlock"])("div",B,[C,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.account),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",F,[Object(o["createVNode"])("div",q,[L,Object(o["createVNode"])(i,{class:{error:t.password},modelValue:a.form.password,"onUpdate:modelValue":c[4]||(c[4]=function(e){return a.form.password=e}),name:"password",type:"password",placeholder:"请输入密码"},null,8,["class","modelValue"])]),t.password?(Object(o["openBlock"])(),Object(o["createBlock"])("div",S,[U,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.password),1)])):Object(o["createCommentVNode"])("",!0)])],64)),Object(o["createVNode"])("div",E,[Object(o["createVNode"])("div",P,[Object(o["createVNode"])(i,{as:"XtxCheckbox",name:"isAgree",modelValue:a.form.isAgree,"onUpdate:modelValue":c[8]||(c[8]=function(e){return a.form.isAgree=e})},null,8,["modelValue"]),X,G,K,Q]),t.isAgree?(Object(o["openBlock"])(),Object(o["createBlock"])("div",W,[Y,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.isAgree),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("a",{onClick:c[9]||(c[9]=function(e){return a.login()}),href:"javascript:;",class:"btn"},"登录")]})),_:1},8,["validation-schema"]),Z])})),ee=t("1da1"),ce=(t("99af"),t("96cf"),t("7bb1")),te=t("9f94"),oe=t("2f59"),ae=t("c24f"),re=t("5502"),ne=t("6c02"),ie=t("7bbe"),le={name:"LoginForm",components:{Form:ce["b"],Field:ce["a"]},setup:function(){var e=Object(o["ref"])(!1),c=Object(o["reactive"])({isAgree:!0,account:"tonjie",password:"123456",mobile:null,code:null}),t={account:te["a"].account,password:te["a"].password,mobile:te["a"].mobile,code:te["a"].code,isAgree:te["a"].isAgree},a=Object(o["ref"])(null);Object(o["watch"])(e,(function(){c.isAgree=!0,c.account=null,c.password=null,c.mobile=null,c.code=null,a.value.resetForm()}));var r=Object(re["b"])(),n=Object(ne["d"])(),i=Object(ne["c"])(),l=function(){var t=Object(ee["a"])(regeneratorRuntime.mark((function t(){var o,l,s,d,u,b,j,m,p,O,f,v,V;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.value.validate();case 2:if(o=t.sent,!o){t.next=25;break}if(t.prev=4,l=null,!e.value){t.next=13;break}return s=c.mobile,d=c.code,t.next=10,Object(ae["c"])({mobile:s,code:d});case 10:l=t.sent,t.next=17;break;case 13:return u=c.account,b=c.password,t.next=16,Object(ae["b"])({account:u,password:b});case 16:l=t.sent;case 17:j=l.result,m=j.id,p=j.account,O=j.avatar,f=j.mobile,v=j.nickname,V=j.token,r.commit("user/setUser",{id:m,account:p,avatar:O,mobile:f,nickname:v,token:V}),r.dispatch("cart/mergeCart").then((function(){n.push(i.query.redirectUrl||"/"),Object(oe["a"])({type:"success",text:"登录成功"})})),t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](4),t.t0.response.data&&Object(oe["a"])({type:"error",text:t.t0.response.data.message||"登录失败"});case 25:case"end":return t.stop()}}),t,null,[[4,22]])})));return function(){return t.apply(this,arguments)}}(),s=Object(o["ref"])(0),d=Object(ie["u"])((function(){s.value--,s.value<=0&&u()}),1e3,!1),u=d.pause,b=d.resume;Object(o["onUnmounted"])((function(){u()}));var j=function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=t.mobile(c.mobile),!0===o?0===s.value&&Object(ae["d"])(c.mobile).then((function(){Object(oe["a"])({type:"success",text:"发送成功"}),s.value=60,b()})).catch((function(e){var c;Object(oe["a"])({type:"error",text:(null===(c=e.response.data)||void 0===c?void 0:c.message)||"发送失败"})})):a.value.setFieldError("mobile",o);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m="101941968",p=encodeURIComponent("http://erabbit.itheima.net/#/login/callback"),O="https://graph.qq.com/oauth2.0/authorize?client_id=".concat(m,"&response_type=token&scope=all&redirect_uri=").concat(p);return{isMsgLogin:e,form:c,schema:t,formCom:a,login:l,send:j,time:s,qqUrl:O}}};t("cce2");le.render=$,le.__scopeId="data-v-1847cec5";var se=le,de={name:"PageLogin",components:{LoginHeader:p["a"],LoginFooter:O["a"],LoginForm:se},setup:function(){var e=Object(o["ref"])("account"),c=Object(re["b"])(),t=Object(ne["c"])();return c.commit("user/setRedirectUrl",t.query.redirectUrl||"/"),{activeName:e}}};t("d460");de.render=m,de.__scopeId="data-v-45b56284";c["default"]=de},cce2:function(e,c,t){"use strict";t("351f")},d460:function(e,c,t){"use strict";t("6944")}}]);
//# sourceMappingURL=chunk-7febea6e.64cc980e.js.map